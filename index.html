<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Bookshelf — Demo</title>
<style>
  :root{
    --accent:#08124a;
    --page-bg:#f7f0ea;
    --muted:#6b6b7a;
    --overlay-color: rgba(12,96,138,0.85);
  }
  *{box-sizing:border-box}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    margin:0;
    background:var(--page-bg);
    color:#0b1330;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  .container{
    max-width:1200px;
    margin:36px auto;
    padding:20px;
  }

  /* Cards area (apps / mini-sites / tools) */
  .cards-row{
    display:grid;
    grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
    gap:28px;
    margin-bottom:40px;
  }
  .card-header{
    background:var(--accent);
    color:#fff;
    padding:18px;
    font-weight:700;
    font-size:1.15rem;
  }
  .card-body{
    border:3px solid var(--accent);
    background:#fff;
    padding:16px;
    min-height:120px;
  }
  .item{
    color:var(--accent);
    text-decoration:none;
    font-weight:600;
    display:block;
    margin-bottom:6px;
  }
  .item-desc{ margin:0 0 12px 0; color:var(--muted); }

  /* Bookshelf section */
  .section-title{
    font-style:italic;
    font-weight:600;
    border-top:4px solid #0b0b0b;
    padding-top:8px;
    display:inline-block;
    margin-bottom:12px;
  }

  .bookshelf{
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(120px,1fr));
    gap:20px;
    margin-top:18px;
  }

  .tile{
    outline:none;
  }

  .cover{
    position:relative;
    width:100%;
    padding-top:150%; /* aspect ratio */
    overflow:hidden;
    border:3px solid #222;
    background:#ddd;
    display:flex;
    align-items:center;
    justify-content:center;
    color:#fff;
    font-weight:700;
    text-align:center;
    box-shadow:0 2px 0 rgba(0,0,0,0.06);
    transition:transform .28s ease;
  }

  /* grayscale "cover" look */
  .cover .inner{
    position:absolute;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:16px;
    padding:8px;
    transform:translateZ(0);
    filter:grayscale(100%) contrast(.95) brightness(.9);
    transition:transform .35s ease, filter .35s ease;
  }

  .overlay{
    position:absolute; inset:0;
    background:linear-gradient(0deg,var(--overlay-color),rgba(0,0,0,0));
    mix-blend-mode:multiply;
    opacity:0;
    transition:opacity .28s ease, transform .28s ease;
    transform:translateY(6px);
    pointer-events:none;
  }

  .tile:focus .overlay,
  .tile:hover .overlay{
    opacity:1;
    transform:none;
  }
  .tile:focus .inner,
  .tile:hover .inner{
    filter:none;
    transform:scale(1.03);
  }

  .caption{ margin-top:8px; }
  .title{ font-weight:700; font-size:.95rem; }
  .author{ color:var(--muted); font-size:.85rem; }

  /* Modal */
  .modal{
    position:fixed; inset:0; display:none;
    align-items:center; justify-content:center; z-index:60;
  }
  .modal[aria-hidden="false"]{ display:flex; }
  .backdrop{ position:absolute; inset:0; background:rgba(0,0,0,0.45); }
  .panel{
    position:relative;
    z-index:2;
    width:min(880px,94%);
    margin:20px;
    background:#fff;
    border-radius:6px;
    padding:20px;
    box-shadow:0 12px 30px rgba(0,0,0,0.35);
  }
  .close-btn{
    position:absolute; right:10px; top:8px;
    background:none; border:0; font-size:26px; cursor:pointer;
  }
  .muted{ color:var(--muted); margin-top:4px; margin-bottom:12px; }
  .review{ white-space:pre-wrap; line-height:1.45; color:#111; }

  /* Responsive tweaks */
  @media (max-width:640px){
    .bookshelf{ grid-template-columns:repeat(2,1fr); gap:14px; }
    .cover{ padding-top:140%; }
  }
</style>
</head>
<body>
  <div class="container">
    <!-- cards -->
    <div class="cards-row" aria-hidden="true">
      <div>
        <div class="card-header">Apps</div>
        <div class="card-body">
          <a class="item" href="#">Scatterpad</a>
          <p class="item-desc">A new kind of document editor, for enjoyers of sprawling multimedia.</p>
          <a class="item" href="#">Streams</a>
          <p class="item-desc">A micro-blogging platform, built on a chat app.</p>
        </div>
      </div>

      <div>
        <div class="card-header">Mini-sites</div>
        <div class="card-body">
          <a class="item" href="#">Mezzanine</a>
          <p class="item-desc">Bulletin board for friends and mutuals.</p>
          <a class="item" href="#">Map of my Internet</a>
          <p class="item-desc">My favourite places on the interwebs.</p>
          <a class="item" href="#">WEBCRAFT</a>
          <p class="item-desc">Portfolio and process explainer for my design services.</p>
        </div>
      </div>

      <div>
        <div class="card-header">Tools</div>
        <div class="card-body">
          <a class="item" href="#">Printdex</a>
          <p class="item-desc">Convert Github Issues and Markdown lists to printable index cards.</p>
          <a class="item" href="#">Minutes</a>
          <p class="item-desc">Plaintext editor with automated timestamps.</p>
        </div>
      </div>
    </div>

    <!-- bookshelf -->
    <h2 class="section-title">Bookshelf / reading</h2>

    <div class="bookshelf" id="bookshelf" role="list"></div>
  </div>

  <!-- modal -->
  <div id="modal" class="modal" role="dialog" aria-hidden="true" aria-modal="true" aria-labelledby="modal-title">
    <div class="backdrop" data-close></div>
    <div class="panel" role="document">
      <button class="close-btn" aria-label="Close" data-close>&times;</button>
      <h3 id="modal-title"></h3>
      <div id="modal-author" class="muted"></div>
      <div id="modal-review" class="review"></div>
    </div>
  </div>

<script>
/*
 Single-file bookshelf:
 - Data below (books array) controls covers, titles, and reviews.
 - Each cover is rendered as a colored block with the title; no external images needed.
 - Hover applies a colored overlay; click/keyboard opens modal with review text.
*/

const books = [
  {
    id: "seven-nights",
    title: "Seven Nights",
    author: "Jorge Luis Borges",
    color: "#5078B0",
    review: "A compact, lucid collection of Borges' meditations — short, luminous, and uncanny."
  },
  {
    id: "pattern-language",
    title: "A Pattern Language",
    author: "Christopher Alexander et al.",
    color: "#8C664E",
    review: "Dense but rewarding: an architecture book that reads like a toolkit for humane design."
  },
  {
    id: "cats-cradle",
    title: "Cat's Cradle",
    author: "Kurt Vonnegut",
    color: "#6AA06E",
    review: "Sharp satire and brisk pacing — Vonnegut at his brilliant, absurd best."
  },
  {
    id: "tao-te-ching",
    title: "Tao Te Ching",
    author: "Lao Tzu",
    color: "#6B7BA2",
    review: "Short, paradoxical verses that remain surprisingly useful for quiet thought and action."
  },
  {
    id: "flow",
    title: "Flow",
    author: "Mihaly Csikszentmihalyi",
    color: "#A38EA8",
    review: "An influential synthesis on optimal experience and concentration."
  },
  {
    id: "everlasting-meal",
    title: "An Everlasting Meal",
    author: "Tamar Adler",
    color: "#C08A5B",
    review: "Practical and soulful cooking; a book about how to think while you feed yourself."
  }
];

const shelf = document.getElementById('bookshelf');

function createTile(book){
  const tile = document.createElement('div');
  tile.className = 'tile';
  tile.setAttribute('role','listitem');
  tile.setAttribute('tabindex','0');
  tile.dataset.review = book.review;
  tile.dataset.title = book.title;
  tile.dataset.author = book.author;

  // cover box
  const cover = document.createElement('div');
  cover.className = 'cover';
  cover.style.background = '#222'; // border sits separately; we'll draw inner
  const inner = document.createElement('div');
  inner.className = 'inner';
  inner.style.background = `linear-gradient(180deg, ${book.color}, ${shade(book.color, -18)})`;
  // show title on inner
  inner.innerHTML = `<div style="padding:8px;font-size:14px;line-height:1.1;">${escapeHtml(book.title)}</div>`;
  cover.appendChild(inner);

  const overlay = document.createElement('div');
  overlay.className = 'overlay';
  cover.appendChild(overlay);

  tile.appendChild(cover);

  // caption
  const cap = document.createElement('div');
  cap.className = 'caption';
  cap.innerHTML = `<div class="title">${escapeHtml(book.title)}</div><div class="author">${escapeHtml(book.author)}</div>`;
  tile.appendChild(cap);

  // click + keyboard handlers
  tile.addEventListener('click', ()=> openModal(book));
  tile.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter' || e.key === ' '){
      e.preventDefault();
      openModal(book);
    }
  });

  return tile;
}

// create tiles
books.forEach(b=>{
  shelf.appendChild(createTile(b));
});

// modal logic
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modal-title');
const modalAuthor = document.getElementById('modal-author');
const modalReview = document.getElementById('modal-review');
let lastFocused = null;

function openModal(book){
  lastFocused = document.activeElement;
  modalTitle.textContent = book.title;
  modalAuthor.textContent = book.author;
  modalReview.textContent = book.review;
  modal.setAttribute('aria-hidden','false');
  document.body.style.overflow = 'hidden';
  // focus the close button
  const btn = modal.querySelector('[data-close]');
  if(btn) btn.focus();
}

function closeModal(){
  modal.setAttribute('aria-hidden','true');
  document.body.style.overflow = '';
  if(lastFocused) lastFocused.focus();
  lastFocused = null;
}

// close handlers
modal.addEventListener('click', (e)=>{
  if(e.target.matches('[data-close]') || e.target.classList.contains('backdrop')){
    closeModal();
  }
});
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape' && modal.getAttribute('aria-hidden') === 'false'){
    closeModal();
  }
});

// small helper: darken/lighten hex color
function shade(hex, percent){
  // hex like #rrggbb
  const f = hex.slice(1);
  const t = percent < 0 ? 0 : 255;
  const p = Math.abs(percent)/100;
  const R = parseInt(f.substring(0,2),16);
  const G = parseInt(f.substring(2,4),16);
  const B = parseInt(f.substring(4,6),16);
  const newR = Math.round((t - R)*p) + R;
  const newG = Math.round((t - G)*p) + G;
  const newB = Math.round((t - B)*p) + B;
  return `rgb(${newR},${newG},${newB})`;
}

// basic HTML escape for inserted content
function escapeHtml(s){
  return String(s).replace(/[&<>"']/g, function(m){
    return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m];
  });
}
</script>
</body>
</html>